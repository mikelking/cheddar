function dppLicenseSubmitReset(e,s){jQuery("p.gppro-license-field-message").text(" "),"disable"===s&&(e.attr("disabled","disabled"),jQuery(".gppro-license-spinner").addClass("gppro-license-spinner-display")),"enable"===s&&(e.removeAttr("disabled"),jQuery(".gppro-license-spinner").removeClass("gppro-license-spinner-display"))}function dppLicenseFieldMessage(e,s,i){var r=jQuery("p.gppro-license-field-message"),n=jQuery(".gppro-license-key-core-single .password-toggle");r.text(" "),jQuery(e).removeClass("gppro-license-core-valid gppro-license-core-invalid"),"error"===i&&e.addClass("gppro-license-core-invalid"),"success"===i&&e.addClass("gppro-license-core-valid"),"normal"===i&&e.removeClass("gppro-license-core-valid gppro-license-core-invalid"),""!==s&&r.text(s),""===e.val()?n.addClass("password-toggle-hide"):n.removeClass("password-toggle-hide")}function dppLicenseButtonSwap(e,s){jQuery("input#gppro-license-action").val(e),jQuery("button.gppro-license-core-button").html(s),"core_activate"===e&&jQuery("input#gppro-license-core").val("")}jQuery(document).ready(function(e){e.fn.divExists=function(e){var s=[].slice.call(arguments,1);return this.length&&e.call(this,s),this};var s="",i="",r="",n="",o="",c="",a="normal",l="",p="",t="",d="",g="",u="",v=licenseText.generalerror;e("td.gppro-license-key-core-single").divExists(function(){""!==e("#gppro-license-core").val()&&e(".gppro-license-key-core-single .password-toggle").removeClass("password-toggle-hide"),e("#gppro-license-core").hidePassword(!1),e("td.gppro-license-key-core-single").on("click","span.password-toggle",function(){e(this).hasClass("password-visible")?(e(this).removeClass("password-visible dashicons-visibility").addClass("dashicons-hidden"),e("#gppro-license-core").hidePassword(!1)):(e(this).addClass("password-visible dashicons-visibility").removeClass("dashicons-hidden"),e("#gppro-license-core").showPassword(!1))})}),e(".gppro-license-key-core-row").on("click",".gppro-license-core-button",function(b){if(""===e("#gppro-non-ajax").val()){if(b.preventDefault(),dppLicenseSubmitReset(i=e(this),"disable"),s=e("td.gppro-license-key-core-single"),n=e(s).find("#gppro-license-core"),""===(c=e(s).find("#gppro-license-core-nonce").val()))return dppLicenseSubmitReset(i,"enable"),dppLicenseFieldMessage(n,v,"error"),!1;if(r=e(s).find("#gppro-license-action").val(),o=n.val(),""===r)return dppLicenseSubmitReset(i,"enable"),!1;if(""===o)return dppLicenseSubmitReset(i,"enable"),dppLicenseFieldMessage(n,licenseText.missingkey,"error"),!1;"core_activate"===r&&(g="core_deactivate",d=licenseText.deactivate,u=licenseText.deactivated,a="success"),"core_deactivate"===r&&(g="core_activate",d=licenseText.activate,u=licenseText.deactivated,a="normal");var m={action:r,license:o,nonce:c};jQuery.post(ajaxurl,m,function(e){var s;dppLicenseSubmitReset(i,"enable");try{s=jQuery.parseJSON(e)}catch(e){return!1}return!0===s.success?(p=void 0===s.action?g:s.action,l=void 0===s.button?d:s.button,t=void 0===s.message?u:s.message,dppLicenseButtonSwap(p,l),dppLicenseFieldMessage(n,t,a),window.onbeforeunload=null,!1):!1===s.success&&""!==s.errcode?(t=""===s.message?v:s.message,dppLicenseFieldMessage(n,t,"error"),!1):!1===s.success?(dppLicenseFieldMessage(n,v,"error"),!1):void 0})}})});